<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>telnet-rxjs</title>
	<meta name="description" content="Documentation for telnet-rxjs">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">telnet-rxjs</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1>telnet-rxjs</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#telnet-rxjs" id="telnet-rxjs" style="color: inherit; text-decoration: none;">
					<h1>telnet-rxjs</h1>
				</a>
				<p>A node.js telnet library that wraps the sockets with RxJS observables.</p>
				<p><a href="https://travis-ci.org/herrevilkitten/telnet-rxjs"><img src="https://travis-ci.org/herrevilkitten/telnet-rxjs.svg?branch=master" alt="Build Status"></a></p>
				<a href="#synposis" id="synposis" style="color: inherit; text-decoration: none;">
					<h2>SYNPOSIS</h2>
				</a>
				<a href="#connect-to-a-remote-server" id="connect-to-a-remote-server" style="color: inherit; text-decoration: none;">
					<h3>Connect to a remote server</h3>
				</a>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { Telnet } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;telnet-rxjs&#x27;</span>;

<span class="hljs-comment">// const Telnet = require(&#x27;telnet-rxjs&#x27;).Telnet;</span>

<span class="hljs-comment">// const { Telnet } = require(&#x27;telnet-rxjs&#x27;);</span>


<span class="hljs-keyword">const</span> client = Telnet.client(<span class="hljs-string">&#x27;www.yahoo.com:80&#x27;</span>);

<span class="hljs-keyword">let</span> connected = <span class="hljs-literal">false</span>;

client.filter(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> event <span class="hljs-keyword">instanceof</span> Telnet.Event.Connected)
  .subscribe(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    connected = <span class="hljs-literal">true</span>;
    client.sendln(<span class="hljs-string">&#x27;GET /&#x27;</span>);
  });

client.data
  .subscribe(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!connected) {
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-built_in">console</span>.log(data);
  });

client.connect();</code></pre>
				<a href="#start-a-server" id="start-a-server" style="color: inherit; text-decoration: none;">
					<h3>Start a server</h3>
				</a>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { Telnet } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;telnet-rxjs&#x27;</span>;

<span class="hljs-comment">// const Telnet = require(&#x27;telnet-rxjs&#x27;).Telnet;</span>

<span class="hljs-comment">// const { Telnet } = require(&#x27;telnet-rxjs&#x27;);</span>

<span class="hljs-keyword">const</span> server = Telnet.server(<span class="hljs-number">80</span>);

server.filter(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> event <span class="hljs-keyword">instanceof</span> Telnet.Event.Connected)
  .subscribe(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> socket = event.connection.socket;

    <span class="hljs-keyword">if</span> (!socket) {
      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">&#x27;No socket for&#x27;</span>, event.connection);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Connection received from&#x27;</span>, socket.remoteAddress);
    event.connection.sendln(<span class="hljs-string">&#x27;Hello!&#x27;</span>);
    event.connection.disconnect();
  });

server.start().then(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Server has been started.&#x27;</span>);
});</code></pre>
				<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
					<h2>INSTALLATION</h2>
				</a>
				<pre><code>npm <span class="hljs-keyword">install</span> telnet-rxjs</code></pre>
				<a href="#dependencies" id="dependencies" style="color: inherit; text-decoration: none;">
					<h3>Dependencies</h3>
				</a>
				<p><a href="https://www.npmjs.com/package/rxjs">RxJS</a></p>
				<a href="#description" id="description" style="color: inherit; text-decoration: none;">
					<h2>DESCRIPTION</h2>
				</a>
				<p><code>telnet-rxjs</code> is a simple wrapper around a telnet client or server, using <a href="https://github.com/ReactiveX/rxjs">RxJS</a> for handling data received from the server.</p>
				<a href="#telnet-client" id="telnet-client" style="color: inherit; text-decoration: none;">
					<h3>Telnet Client</h3>
				</a>
				<a href="#create-a-connection" id="create-a-connection" style="color: inherit; text-decoration: none;">
					<h4>Create a Connection</h4>
				</a>
				<p>Connections are created by using the <code>Telnet.client</code> static factory method or <code>createClient</code> function.  This method takes two arguments</p>
				<ul>
					<li>The URI of the host to connect to</li>
					<li>Optionally, additional options to pass to the network socket</li>
				</ul>
				<p>The URI should be in formats similar to <code>protocol:host:port</code>.  Host and port are both required.  Protocol can be either <code>telnet</code> or <code>telnets</code>, which uses a TLS connection.  If the protocol is not specified, it defaults to <code>telnet</code>.</p>
				<p>The options can be any option accepted by the <a href="https://nodejs.org/dist/latest-v7.x/docs/api/net.html#net_net_connect_options_connectlistener">net.connect</a> or <a href="https://nodejs.org/dist/latest-v7.x/docs/api/tls.html#tls_tls_connect_options_callback">tls.connect</a> functions of Node.js.  For example, to create a TLS connection to a site with a self-signed certificate, this statement can be used:</p>
				<pre><code>const<span class="hljs-built_in"> client </span>= Telnet.client(<span class="hljs-string">&#x27;telnets:some.example.com:8443&#x27;</span>, { rejectUnauthorized: <span class="hljs-literal">false</span> });</code></pre>
				<p>The factory method returns a <code>Telnet.Connection</code> object, which is a subclass of <code>Observable&lt;Telnet.Event&gt;</code>.</p>
				<a href="#listen-for-events-and-data" id="listen-for-events-and-data" style="color: inherit; text-decoration: none;">
					<h4>Listen for Events and Data</h4>
				</a>
				<p>As an observable, the telnet connection can be subscribed to in order to receive data from the server.  The default subscription publishes <code>Telnet.Event</code> objects.</p>
				<a href="#client-events" id="client-events" style="color: inherit; text-decoration: none;">
					<h5>Client Events</h5>
				</a>
				<p>All events have a <code>timestamp</code> field that is a <code>Date</code> object.</p>
				<p><code>Telnet.Event.Connecting</code>
				Published when the client begins connecting to the server.  The event has a <code>connection</code> property for the client.</p>
				<p><code>Telnet.Event.Connected</code>
				Published after a connection to the server has been established.  The event has a <code>connection</code> property for the client.</p>
				<p><code>Telnet.Event.Disconnecting</code>
				Published when the client begins to disconnect from the server.  The event has a <code>connection</code> property for the client.</p>
				<p><code>Telnet.Event.Disconnected</code>
				Published when the client has closed its connection to the server.  The event has a <code>connection</code> property for the client.</p>
				<p><code>Telnet.Event.Data</code>
				Published when data is received from the server.  The event has a <code>data</code> field that is a string.</p>
				<p><code>Telnet.Event.Command</code>
				Published when a <a href="http://www.faqs.org/rfcs/rfc854.html">telnet command</a> has been received from the server.  The event has a <code>command</code> field that is a string of numbers.</p>
				<p>Additional accessors are provided that act as filters for the <code>Data</code> and <code>Command</code> events.  The <code>data</code> accessor publishes each string of data.  The <code>commands</code> accessor publishes each array of numbers.</p>
				<a href="#listen-for-all-events" id="listen-for-all-events" style="color: inherit; text-decoration: none;">
					<h5>Listen for All Events</h5>
				</a>
				<p>Events are all subclasses of Telnet.Event.</p>
				<pre><code>client.subscribe(<span class="hljs-function"><span class="hljs-params">(event)</span> =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Received event:&#x27;</span>, event);
});</code></pre>
				<a href="#listen-for-data" id="listen-for-data" style="color: inherit; text-decoration: none;">
					<h5>Listen for Data</h5>
				</a>
				<p>The data will be returned as a string.</p>
				<pre><code>client.data.subscribe(<span class="hljs-function"><span class="hljs-params">(data)</span> =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Received data:&#x27;</span>, data);
});</code></pre>
				<p>or</p>
				<pre><code>client.filter(<span class="hljs-function"><span class="hljs-params">(event)</span> =&gt;</span> event <span class="hljs-keyword">instanceof</span> Telnet.Event.Data).subscribe(<span class="hljs-function"><span class="hljs-params">(event)</span> =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Received data:&#x27;</span>, event.data);
});</code></pre>
				<a href="#listen-for-commands" id="listen-for-commands" style="color: inherit; text-decoration: none;">
					<h5>Listen for Commands</h5>
				</a>
				<p>The commands will be an array of numbers.</p>
				<pre><code>client.commands.subscribe(<span class="hljs-function"><span class="hljs-params">(command)</span> =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Received command:&#x27;</span>, command);
});</code></pre>
				<p>or</p>
				<pre><code>client.filter(<span class="hljs-function"><span class="hljs-params">(event)</span> =&gt;</span> event <span class="hljs-keyword">instanceof</span> Telnet.Event.Command).subscribe(<span class="hljs-function"><span class="hljs-params">(event)</span> =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Received command:&#x27;</span>, event.command);
});</code></pre>
				<a href="#listen-for-errors" id="listen-for-errors" style="color: inherit; text-decoration: none;">
					<h5>Listen for Errors</h5>
				</a>
				<pre><code>client.subscribe(
  <span class="hljs-function"><span class="hljs-params">(event)</span> =&gt;</span> {
    console.log(<span class="hljs-string">&#x27;Received event:&#x27;</span>, event);
  },
  <span class="hljs-function"><span class="hljs-params">(<span class="hljs-built_in">error</span>)</span> =&gt;</span> {
    console.<span class="hljs-built_in">error</span>(<span class="hljs-string">&#x27;An error occurred:&#x27;</span>, <span class="hljs-built_in">error</span>);
  }
);</code></pre>
				<p>or</p>
				<pre><code>client
  .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">(error)</span> =&gt;</span> {
    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">&#x27;An error occurred:&#x27;</span>, error);
  })
  .subscribe(<span class="hljs-function"><span class="hljs-params">(event)</span> =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Received event:&#x27;</span>, event);
  });</code></pre>
				<a href="#connect" id="connect" style="color: inherit; text-decoration: none;">
					<h4>Connect</h4>
				</a>
				<p>The <code>connect</code> method must be called before any connections will be opened.  Configuration errors, such as missing port numbers, will cause an exception to be thrown.  Other errors will be reported on the error channel of the client observable.</p>
				<a href="#disconnect" id="disconnect" style="color: inherit; text-decoration: none;">
					<h4>Disconnect</h4>
				</a>
				<p>The <code>disconnect</code> method closes the connection to the server.</p>
				<a href="#telnet-server" id="telnet-server" style="color: inherit; text-decoration: none;">
					<h3>Telnet Server</h3>
				</a>
				<p>Connections are created by using the <code>Telnet.server</code> static factory method or <code>createServer</code> function.  This method takes two arguments</p>
				<ul>
					<li>The URI of the server to create</li>
					<li>Optionally, additional options to pass to the network socket</li>
				</ul>
				<p>The URI should be in formats similar to <code>protocol:host:port</code>.  Only the port is required.  Protocol can be either <code>telnet</code> or <code>telnets</code>, which uses a TLS connection.  If the protocol is not specified, it defaults to <code>telnet</code>.  If the host is not specified, it defaults to <code>0.0.0.0</code>.</p>
				<p>The options can be any option accepted by the <a href="https://nodejs.org/api/net.html#net_net_createserver_options_connectionlistener">net.createServer</a> or <a href="https://nodejs.org/api/tls.html#tls_tls_createserver_options_secureconnectionlistener">tls.createServer</a> functions of Node.js.</p>
				<p>The factory method returns a <code>Telnet.Server</code> object, which is a subclass of <code>Observable&lt;Telnet.Event&gt;</code>.</p>
				<a href="#listen-for-events" id="listen-for-events" style="color: inherit; text-decoration: none;">
					<h4>Listen for Events</h4>
				</a>
				<p>As an observable, the telnet connection can be subscribed to in order to receive data from the server.  The default subscription publishes <code>Telnet.Event</code> objects.</p>
				<a href="#server-events" id="server-events" style="color: inherit; text-decoration: none;">
					<h5>Server Events</h5>
				</a>
				<p>All events have a <code>timestamp</code> field that is a <code>Date</code> object.</p>
				<p><code>Telnet.Event.Connecting</code>
				Published when a client begins connecting to the server. The event has a <code>connection</code> property for the client.</p>
				<p><code>Telnet.Event.Connected</code>
				Published after a connection to the server has been established. The event has a <code>connection</code> property for the client.</p>
				<p><code>Telnet.Event.Disconnecting</code>
				Published when a client begins to disconnect from the server. The event has a <code>connection</code> property for the client.</p>
				<p><code>Telnet.Event.Disconnected</code>
				Published when a client has closed its connection to the server. The event has a <code>connection</code> property for the client.</p>
				<p><code>Telnet.Event.Starting</code>
				Published when the server begins starting up.</p>
				<p><code>Telnet.Event.Started</code>
				Published after the server has started up.</p>
				<p><code>Telnet.Event.Ending</code>
				Published when the server begins shutting down.</p>
				<p><code>Telnet.Event.Ended</code>
				Published after the server has shut down.</p>
				<p>Additional accessors are provided that act as filters for the <code>Data</code> and <code>Command</code> events.  The <code>data</code> accessor publishes each string of data.  The <code>commands</code> accessor publishes each array of numbers.</p>
				<a href="#start" id="start" style="color: inherit; text-decoration: none;">
					<h4>Start</h4>
				</a>
				<p>The <code>start</code> method must be called before the server will listen and any clients can connect.  Configuration errors, such as missing port numbers, will cause an exception to be thrown.  Other errors will be reported on the error channel of the server observable.</p>
				<p>The method returns a promise that resolves to the [net.Server] to [tls.Server] object that underlies the connection, when the
				<code>listen</code> method&#39;s callback is invoked.</p>
				<a href="#stop" id="stop" style="color: inherit; text-decoration: none;">
					<h4>Stop</h4>
				</a>
				<p>The <code>stop</code> method will shutdown the server.  First, it will call the <code>disconnect</code> method on each connection.  Then, it will close the server port.</p>
				<p>The method returns a promise that resolves when the <code>close</code> method&#39;s callback is invoked.</p>
				<a href="#links" id="links" style="color: inherit; text-decoration: none;">
					<h2>LINKS</h2>
				</a>
				<p><a href="https://herrevilkitten.github.io/telnet-rxjs/">Generated API Documentation</a></p>
				<p><a href="https://www.npmjs.com/package/telnet-rxjs">NPM Package</a></p>
				<p><a href="http://www.faqs.org/rfcs/rfc854.html">Telnet RFC</a></p>
				<a href="#author" id="author" style="color: inherit; text-decoration: none;">
					<h2>AUTHOR</h2>
				</a>
				<p>Eric Kidder</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-class">
						<a href="classes/command.html" class="tsd-kind-icon">Command</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/connection.html" class="tsd-kind-icon">Connection</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/event.html" class="tsd-kind-icon">Event</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/protocol.html" class="tsd-kind-icon">Protocol</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/server.html" class="tsd-kind-icon">Server</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/telnet.html" class="tsd-kind-icon">Telnet</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#protocoltype" class="tsd-kind-icon">Protocol<wbr>Type</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#createclient" class="tsd-kind-icon">create<wbr>Client</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#createserver" class="tsd-kind-icon">create<wbr>Server</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>